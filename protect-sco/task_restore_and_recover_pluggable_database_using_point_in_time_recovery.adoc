---
permalink: protect-sco/task_restore_and_recover_pluggable_database_using_point_in_time_recovery.html 
sidebar: sidebar 
keywords: PDB, pluggable database, restore, CDB, PITR, point-in-time recovery, RMAN 
summary: 'Sie können eine Pluggable Database (PDB), die beschädigt oder gelöscht wurde, wiederherstellen, ohne dass dies Auswirkungen auf die anderen PDBs in der Containerdatenbank \(CDB\) hat.  SnapCenter verwendet RMAN, um eine zeitpunktbezogene Wiederherstellung (PITR) der PDB durchzuführen.' 
---
= Wiederherstellen und Wiederherstellen einer steckbaren Datenbank mithilfe der Point-in-Time-Wiederherstellung
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
Sie können eine Pluggable Database (PDB), die beschädigt oder gelöscht wurde, wiederherstellen, ohne dass dies Auswirkungen auf die anderen PDBs in der Containerdatenbank (CDB) hat.  SnapCenter verwendet RMAN, um eine Point-in-Time-Wiederherstellung (PITR) der PDB durchzuführen.

*Bevor Sie beginnen*

* Die Sicherungen, die zum Ausführen von PITR eines PDB erforderlich sind, sollten katalogisiert und bereitgestellt werden.
+

NOTE: In einem RAC-Setup sollten Sie die PDB auf allen Knoten des RAC-Setups manuell schließen (indem Sie den Status in „MOUNTED“ ändern).

* Wenn Sie das Plug-In als Nicht-Root-Benutzer installiert haben, sollten Sie die Ausführungsberechtigungen für die Verzeichnisse „prescript“ und „postscript“ manuell zuweisen.


*Über diese Aufgabe*

Während des PITR-Vorgangs erstellt RMAN eine Hilfsinstanz am angegebenen Hilfsziel.  Das zusätzliche Ziel könnte ein Einhängepunkt oder eine ASM-Datenträgergruppe sein.  Wenn am bereitgestellten Speicherort ausreichend Speicherplatz vorhanden ist, können Sie anstelle eines dedizierten Bereitstellungspunkts einen der bereitgestellten Speicherorte wiederverwenden.

Sie sollten Datum und Uhrzeit oder SCN angeben, um PITR des PDB durchzuführen.  RMAN kann READ WRITE, READ ONLY oder gelöschte PDBs einschließlich Datendateien wiederherstellen.

Sie können nur Folgendes wiederherstellen und wiederherstellen:

* jeweils ein PDB
* ein Tablespace in einer PDB
* mehrere Tablespaces derselben PDB



NOTE: In einem RAC-Setup können Sie PITR von Tablespaces von jedem Knoten des RAC aus durchführen.

*Schritte*

. Klicken Sie im linken Navigationsbereich auf *Ressourcen* und wählen Sie dann das entsprechende Plug-In aus der Liste aus.
. Wählen Sie auf der Seite „Ressourcen“ entweder „Datenbank“ oder „Ressourcengruppe“ aus der Liste „Anzeigen“ aus.
. Wählen Sie die Datenbank vom Typ „Einzelinstanz (mehrere Mandanten)“ entweder aus der Datenbankdetailansicht oder der Ressourcengruppendetailansicht aus.
+
Die Seite „Datenbanktopologie“ wird angezeigt.

. Wählen Sie in der Ansicht „Kopien verwalten“ *Backups* entweder vom primären oder vom sekundären (gespiegelten oder replizierten) Speichersystem aus.
+
Wenn das Backup nicht katalogisiert ist, sollten Sie das Backup auswählen und auf *Katalog* klicken.

. Wählen Sie das katalogisierte Backup aus und klicken Sie dann auf *image:../media/restore_icon.gif["Wiederherstellungssymbol"] *.
. Führen Sie auf der Seite „Wiederherstellungsbereich“ die folgenden Aufgaben aus:
+
.. Wenn Sie eine Sicherung einer Datenbank in einer Real Application Clusters (RAC)-Umgebung ausgewählt haben, wählen Sie den RAC-Knoten aus.
.. Führen Sie eine der folgenden Aktionen aus, je nachdem, ob Sie die PDB oder Tablespaces in einer PDB wiederherstellen möchten:
+
|===


| Wenn Sie wollen... | Schritte... 


 a| 
Wiederherstellen einer PDB
 a| 
... Wählen Sie *Pluggable-Datenbanken (PDBs)* aus.
... Geben Sie die PDB an, die Sie wiederherstellen möchten.
+

NOTE: Sie können PITR nicht auf der PDB$SEED-Datenbank ausführen.





 a| 
Wiederherstellen von Tablespaces in einer PDB
 a| 
... Wählen Sie *Pluggable Database (PDB)-Tablespaces* aus.
... Geben Sie den PDB an.
... Geben Sie entweder einen einzelnen oder mehrere Tablespaces an, die Sie wiederherstellen möchten.
+

NOTE: Sie können PITR nicht auf SYSAUX-, SYSTEM- und UNDO-Tablespaces ausführen.



|===
.. Wählen Sie *Datenbankstatus ändern, falls für Wiederherstellung und Recovery erforderlich* aus, um den Status der Datenbank in den für die Durchführung von Wiederherstellungs- und Recovery-Vorgängen erforderlichen Status zu ändern.


. Führen Sie auf der Seite „Wiederherstellungsbereich“ eine der folgenden Aktionen aus:
+
** Wenn Sie zu einer bestimmten System Change Number (SCN) wiederherstellen möchten, wählen Sie *Bis SCN* und geben Sie die SCN und das Zusatzziel an.
** Wenn Sie die Wiederherstellung auf ein bestimmtes Datum und eine bestimmte Uhrzeit durchführen möchten, wählen Sie *Datum und Uhrzeit* und geben Sie Datum und Uhrzeit sowie das zusätzliche Ziel an.
+
SnapCenter ermittelt und mountet und katalogisiert anschließend die optimale Anzahl an Daten- und Protokollsicherungen, die zum Durchführen von PITR basierend auf der angegebenen SCN oder dem ausgewählten Datum und der ausgewählten Uhrzeit erforderlich sind.



. Geben Sie auf der Seite „PreOps“ den Pfad und die Argumente des Prescripts ein, das Sie vor dem Wiederherstellungsvorgang ausführen möchten.
+
Sie sollten die Prescripts entweder im Pfad /var/opt/snapcenter/spl/scripts oder in einem beliebigen Ordner innerhalb dieses Pfads speichern.  Standardmäßig ist der Pfad /var/opt/snapcenter/spl/scripts ausgefüllt.  Wenn Sie innerhalb dieses Pfads Ordner zum Speichern der Skripte erstellt haben, müssen Sie diese Ordner im Pfad angeben.

+
Sie können auch den Timeout-Wert des Skripts angeben. Der Standardwert beträgt 60 Sekunden.

+
SnapCenter ermöglicht Ihnen die Verwendung der vordefinierten Umgebungsvariablen, wenn Sie das Prescript und Postscript ausführen.link:../protect-sco/predefined-environment-variables-prescript-postscript-restore.html["Mehr erfahren"^]

. Führen Sie auf der Seite „PostOps“ die folgenden Schritte aus:
+
.. Geben Sie den Pfad und die Argumente des Postscripts ein, das Sie nach dem Wiederherstellungsvorgang ausführen möchten.
+

NOTE: Wenn der Wiederherstellungsvorgang fehlschlägt, werden Postscripts nicht ausgeführt und Bereinigungsaktivitäten direkt ausgelöst.

.. Aktivieren Sie das Kontrollkästchen, wenn Sie die Datenbank nach der Wiederherstellung öffnen möchten.
+
In einem RAC-Setup wird die PDB nur auf dem Knoten geöffnet, auf dem die Datenbank wiederhergestellt wurde.  Sie sollten die wiederhergestellte PDB manuell auf allen anderen Knoten des RAC-Setups öffnen.



. Wählen Sie auf der Benachrichtigungsseite aus der Dropdownliste *E-Mail-Einstellungen* die Szenarien aus, in denen Sie die E-Mail-Benachrichtigungen senden möchten.
. Überprüfen Sie die Zusammenfassung und klicken Sie dann auf *Fertig*.
. Überwachen Sie den Vorgangsfortschritt, indem Sie auf *Überwachen* > *Jobs* klicken.

